{% extends "base.html" %}

{% block head %}

{% endblock %}

{% block content %}
<h1 class="h1_main_content">Скопировать настройки точки</h1>

<div class="container">
    <div class="choice_endpoint_id_source">
        <p>Выберите точку с которой будем копировать настройки:</p>
        <input type="text" id="searchInput" placeholder="Поиск..." onfocus="showList()">
        <ul id="first-list" style="display: none;">
            <li>Элемент 1</li>
            <li>Элемент 2</li>
            <li>Элемент 3</li>
            <li>3 пример</li>
            <li>тест</li>
            <li>коляcка 3</li>
            <li>коляcка 5</li>
            <li>коляcка 5</li>
            <!-- Добавьте больше элементов -->
        </ul>
    </div>
    <div class="selected-item-first" id="selected-item"></div>
</div>


</div>


<script>// script.js
document.addEventListener('DOMContentLoaded', function () {
    const searchInput = document.getElementById('searchInput');
    const list = document.getElementById('first-list');
    const listItems = Array.from(document.querySelectorAll('#first-list li'));
    const selectedItemBlock = document.getElementById('selected-item'); // Блок для отображения выбранного элемента

    // Функция для показа списка с ограничением на 5 элементов
    function showList() {
        list.style.display = 'block';
        listItems.forEach((item, index) => {
            if (index < 5) {
                item.style.display = 'block';
            } else {
                item.style.display = 'none';
            }
        });
    }

    // Функция для сохранения выбранного элемента в localStorage
    function saveSelectedItem(event) {
        const selectedItem = event.target.textContent;
        localStorage.setItem('source_endpoint', selectedItem);
        selectedItemBlock.innerText = `Выбранный элемент: ${selectedItem}`; // Отображаем выбранный элемент
    }



    // Функция для скрытия списка при клике вне его области
    function hideList(event) {
        if (!event.target.closest('.choice_endpoint_id_source')) { // Проверяем, находится ли клик внутри контейнера
            list.style.display = 'none';
        }
    }

    // Функция для фильтрации списка с ограничением на 5 элементов
    function filterList(event) {
        const searchQuery = event.target.value.toLowerCase();
        let visibleCount = 0;

        listItems.forEach(item => {
            const itemText = item.textContent.toLowerCase();

            if (itemText.includes(searchQuery)) {
                if (visibleCount < 5) {
                    item.style.display = 'block';
                    visibleCount++;
                } else {
                    item.style.display = 'none';
                }
            } else {
                item.style.display = 'none';
            }
        });
    }

    // Слушатели событий
    searchInput.addEventListener('focus', showList); // Открытие списка при фокусировке
    searchInput.addEventListener('input', filterList); // Фильтрация при вводе текста
    document.addEventListener('click', hideList); // Скрытие списка при клике вне его области
    listItems.forEach(item => item.addEventListener('click', saveSelectedItem)); // Сохранение выбранного элемента
});
    </script> <!-- Подключаем скрипт -->


{% endblock %}